<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of spk_read_mane2</title>
  <meta name="keywords" content="spk_read_mane2">
  <meta name="description" content="reads a mane2 file into a @al_spk object">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">@al_spk</a> &gt; spk_read_mane2.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for @al_spk&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>spk_read_mane2
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>reads a mane2 file into a @al_spk object</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function s = read_mane2(s,filepath,channel) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> reads a mane2 file into a @al_spk object
 function s = read_mane2(s,filepath,channel)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function s = read_mane2(s,filepath,channel)</a>
0002 
0003 <span class="comment">% reads a mane2 file into a @al_spk object</span>
0004 <span class="comment">% function s = read_mane2(s,filepath,channel)</span>
0005 
0006 [pathname,filename,extension] = fileparts(filepath);
0007 m2 = mane2;
0008 m2 = setread(m2,<span class="string">'SPIKE'</span>);
0009 m2.ID.path = pathname;
0010 m2.ID.file = [filename extension];
0011 m2 = read(m2,1);
0012 
0013 
0014 s.name = <span class="string">''</span>;
0015 s.tag  = <span class="string">''</span>;
0016 s.subject = <span class="string">''</span>;
0017 s.file = [filename extension];
0018 s.channel = num2str(channel);
0019 s.date = m2.ID.date;
0020 s.unittype = <span class="string">''</span>;<span class="comment">% e.g. 'MUA' 'SUA'</span>
0021 
0022 trialI = find(m2.Trial.BEH(get_def(m2,<span class="string">'BEH'</span>,<span class="string">'errorcode'</span>),:)==20);
0023 numtrials = length(trialI);
0024 
0025 s.spk = m2.Spike.times(channel+1,trialI);
0026 s.timeorder = -3;
0027 
0028 s.trialgroupname = strvcat(<span class="string">'filenr'</span>,<span class="string">'trialnr'</span>,<span class="string">'setnr'</span>,<span class="string">'condition'</span>,<span class="string">'errorcode'</span>);
0029 s.trialgroup(:,1) = ones(numtrials,1);
0030 [INDEX,VALUE] = get_def(m2,<span class="string">'BEH'</span>,<span class="string">'total'</span>);
0031 s.trialgroup(:,2) = VALUE(trialI)';
0032 [INDEX,VALUE] = get_def(m2,<span class="string">'BEH'</span>,<span class="string">'set'</span>);
0033 s.trialgroup(:,3) = VALUE(trialI)';
0034 [INDEX,VALUE] = get_def(m2,<span class="string">'BEH'</span>,<span class="string">'condition'</span>);
0035 s.trialgroup(:,4) = VALUE(trialI)';
0036 [INDEX,VALUE] = get_def(m2,<span class="string">'BEH'</span>,<span class="string">'errorcode'</span>);
0037 s.trialgroup(:,5) = VALUE(trialI)';
0038 
0039 s.events = num2cell(m2.Time.Events(:,trialI));
0040 s.eventnames = m2.Time.EVdef;
0041 s.eventcolors = zeros(size(m2.Time.EVdef,1),3);</pre></div>
<hr><address>Generated on Tue 25-Apr-2006 16:24:52 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>